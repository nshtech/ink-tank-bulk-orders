{"ast":null,"code":"import _defineProperty from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Button}from'primereact/button';import{Dropdown}from'primereact/dropdown';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{InputText}from'primereact/inputtext';import firebase from'firebase/app';import'firebase/database';import validator from'validator';import customerData from'../customers.json';// import classNames from 'classnames';\nimport'../Dashboard.css';//import { arrayToHash } from '@fullcalendar/core/util/object';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BagTracker=/*#__PURE__*/function(_Component){_inherits(BagTracker,_Component);var _super=_createSuper(BagTracker);function BagTracker(){var _this;_classCallCheck(this,BagTracker);_this=_super.call(this);_this.loadInitialState=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var customerArray;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:customerArray=[];firebase.database().ref('/customers').on('value',function(snapshot){snapshot.forEach(function(childSnapshot){if(childSnapshot.val().activestatus==='active'){customerArray.push(childSnapshot.toJSON());}});});_this.setState({customers:customerArray});_this.setState({loading:false});case 4:case\"end\":return _context.stop();}}},_callee);}));_this.state={customers:[],selectedStatus:null,selectedReshall:null,editing:false,loading:true,selectedCustomers:null};_this.edit=_this.edit.bind(_assertThisInitialized(_this));_this.save=_this.save.bind(_assertThisInitialized(_this));_this.export=_this.export.bind(_assertThisInitialized(_this));_this.onStatusFilterChange=_this.onStatusFilterChange.bind(_assertThisInitialized(_this));_this.onReshallFilterChange=_this.onReshallFilterChange.bind(_assertThisInitialized(_this));_this.bagStatusEditor=_this.bagStatusEditor.bind(_assertThisInitialized(_this));_this.displaySelection=_this.displaySelection.bind(_assertThisInitialized(_this));_this.loadInitialState=_this.loadInitialState.bind(_assertThisInitialized(_this));_this.generalEditor=_this.generalEditor.bind(_assertThisInitialized(_this));return _this;}_createClass(BagTracker,[{key:\"export\",value:function _export(){this.dt.exportCSV();}/* --------------- Editing ---------------- */},{key:\"edit\",value:function edit(){this.setState({editing:true});}},{key:\"save\",value:function save(){this.setState({editing:false});}},{key:\"updateWeightStatus\",value:function updateWeightStatus(props,value,currDate){console.log(this.state.customers[props.rowIndex]);// console.log(props.rowIndex)\n//if (value > props.rowData.maxweight) {\n//if (value > firebase.database().ref('/customers/'+props.rowData.id+'/maxweight')) {\nconsole.log('value: ',value);console.log('maxweight comparison: ',parseInt(this.state.customers[props.rowIndex].maxweight));if(parseFloat(value)>parseFloat(this.state.customers[props.rowIndex].maxweight)){var over=parseFloat(value)-parseFloat(this.state.customers[props.rowIndex].maxweight);console.log('marking as overweight.');firebase.database().ref('/customers/'+props.rowData.id+'/'+'weightstatus').set('overweight');/*let temp = firebase.database().ref('/customers/' + props.rowData.id + '/' + 'quarter-overages')\n            temp.once('value', (snapshot) => {\n                let total = snapshot.val()+over\n                firebase.database().ref('/customers/' + props.rowData.id + '/' + 'quarter-overages').set(total)\n            })*/var updatedCustomers=this.state.customers;updatedCustomers[props.rowIndex][props.field]=value;updatedCustomers[props.rowIndex]['weightstatus']='overweight';//updatedCustomers[props.rowIndex]['quarter-overages'] += parseFloat(value);\n// this.setState({ customers: updatedCustomers });\nreturn value;}else{console.log('marking as underweight');firebase.database().ref('/customers/'+props.rowData.id+'/'+'weightstatus').set('underweight');var _updatedCustomers=this.state.customers;_updatedCustomers[props.rowIndex][props.field]=value;_updatedCustomers[props.rowIndex]['weightstatus']='underweight';// this.setState({ customers: updatedCustomers });\nreturn value;}}},{key:\"onEditorValueChange\",value:function(){var _onEditorValueChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(props,value){var db,currWeight,currDay,currMonth,currYear,currDate,fullDate,currTime,curr;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:firebase.database().ref('/customers/'+props.rowData.id+'/'+props.field).set(value);db=firebase.database().ref();currWeight=value;currDay=new Date().getDate();currMonth=new Date().getMonth()+1;if(currMonth<10){currMonth='0'+currMonth;}if(currDay<10){currDay='0'+currDay;}currYear=new Date().getFullYear();currDate=currYear+'-'+currMonth+'-'+currDay;fullDate=new Date().toDateString();currTime=new Date().toLocaleTimeString('it-IT');db.child('/orders/'+currDate+props.rowData.id).once(\"value\").then(function(snapshot){if(!snapshot.val()){db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id).set(0);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/weight').set(currWeight);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/maxweight').set(props.rowData.maxweight);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/id').set(props.rowData.id);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/laundrystatus').set(props.rowData.laundrystatus);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/weightstatus').set(props.rowData.weightstatus);}db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/date').set(currDate+' '+currTime);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/weight').set(currWeight);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/maxweight').set(props.rowData.maxweight);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/id').set(props.rowData.id);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/laundrystatus').set(props.rowData.laundrystatus);db.child('/orders/'+currDate+' '+currTime+' - '+props.rowData.id+'/weightstatus').set(props.rowData.weightstatus);});firebase.database().ref('/customers/'+props.rowData.id+'/last_weight_updated').set(currDate+' '+currTime);_context2.next=15;return this.updateWeightStatus(props,value,currDate);case 15:curr=_context2.sent;case 16:case\"end\":return _context2.stop();}}},_callee2,this);}));function onEditorValueChange(_x,_x2){return _onEditorValueChange.apply(this,arguments);}return onEditorValueChange;}()},{key:\"inputTextEditor\",value:function inputTextEditor(props,field){var _this2=this;return/*#__PURE__*/_jsx(InputText,{type:\"text\",value:props.rowData[field],style:{maxWidth:100},onChange:function onChange(e){_this2.onEditorValueChange(props,e.target.value);}});}},{key:\"generalEditor\",value:function generalEditor(props){return this.inputTextEditor(props,' ');}// onRowEditInit(event) {\n//     this.clonedCars[event.data.vin] = { ...event.data };\n// }\n// onRowEditSave(event) {\n//     if (this.onRowEditorValidator(event.data)) {\n//         delete this.clonedCars[event.data.vin];\n//         this.growl.show({ severity: 'success', summary: 'Success', detail: 'Car is updated' });\n//     }\n//     else {\n//         this.growl.show({ severity: 'error', summary: 'Error', detail: 'Brand is required' });\n//     }\n// }\n// onRowEditCancel(event) {\n//     let cars = [...this.state.cars2];\n//     cars[event.index] = this.clonedCars[event.data.vin];\n//     delete this.clonedCars[event.data.vin];\n//     this.setState({\n//         cars2: cars\n//     })\n// }\n},{key:\"bagStatusEditor\",value:function bagStatusEditor(allcustomers,currentcustomers,newstatus){var updatedCustomers=_toConsumableArray(allcustomers);var db=firebase.database().ref();var currDay=new Date().getDate();var currMonth=new Date().getMonth()+1;if(currMonth<10){currMonth='0'+currMonth;}if(currDay<10){currDay='0'+currDay;}var currYear=new Date().getFullYear();var currDate=currYear+'-'+currMonth+'-'+currDay;//var currDate = new Date().toDateString();\nvar currTime=new Date().toLocaleTimeString('it-IT');if(currentcustomers){var ids=Object.keys(currentcustomers).map(function(key){return currentcustomers[key].id;});updatedCustomers.map(function(each){if(ids.includes(each.id)){each.laundrystatus=newstatus;if(newstatus=='out-of-service'){each.weightstatus='N/A';each.weekweight='N/A';db.child('/customers/'+each.id+'/weekweight').set('N/A');db.child('/customers/'+each.id+'/weightstatus').set('N/A');}firebase.database().ref('/customers/'+each.id+'/last_status_updated').set(currDate+' '+currTime);db.child('/orders/'+currDate+each.id).once(\"value\").then(function(snapshot){if(!snapshot.val()){db.child('/orders/'+currDate+' '+currTime+' - '+each.id).set(0);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/weight').set(each.weekweight);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/maxweight').set(each.maxweight);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/id').set(each.id);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/laundrystatus').set(each.laundrystatus);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/weightstatus').set(each.weightstatus);}db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/date').set(currDate+' '+currTime);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/weight').set(each.weekweight);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/maxweight').set(each.maxweight);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/id').set(each.id);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/laundrystatus').set(each.laundrystatus);db.child('/orders/'+currDate+' '+currTime+' - '+each.id+'/weightstatus').set(each.weightstatus);});}});this.setState({customers:updatedCustomers});}console.log('bagStatusEditor currentcustomers: ',currentcustomers);this.dothisfirst(currentcustomers,newstatus);}},{key:\"dothisfirst\",value:function dothisfirst(currentcustomers,newstatus){console.log('currentcustomers: ',currentcustomers);console.log('newstatus: ',newstatus);if(currentcustomers){var ids=Object.keys(currentcustomers).map(function(key){return currentcustomers[key].id;});console.log('ids: ',ids);var query=firebase.database().ref(\"customers\").orderByKey();query.once(\"value\").then(function(snapshot){var counter=0;snapshot.forEach(function(childSnapshot){var key=childSnapshot.key;if(ids.includes(key)){var key=childSnapshot.key;firebase.database().ref('/customers/'+key+'/'+\"laundrystatus\").set(newstatus);console.log('currentcustomers in forEach: ',currentcustomers);if(newstatus==='delivered-to-SH'&&parseFloat(currentcustomers[counter].weekweight)>parseFloat(currentcustomers[counter].maxweight)){firebase.database().ref('/customers/'+key+'/'+\"quarter_overages\").transaction(function(currOverages){//return currOverages+1;\nreturn currOverages+parseFloat(currentcustomers[counter].weekweight)-parseFloat(currentcustomers[counter].maxweight);});}counter=counter+1;}});});}return currentcustomers;}},{key:\"displaySelection\",value:function displaySelection(data){if(this.state.editing&&(!data||data.length===0)){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'left'},children:\"No Selection\"});}}/* --------------- Filters ---------------- */ //dropdown for laundrystats\n},{key:\"statusBodyTemplate\",value:function statusBodyTemplate(rowData){var laundryStatusDisplay={'picked-up':'picked up','delivered-to-SH':'delivered to SH','delivered-to-dorm':'delivered to dorm','out-of-service':'out of service','bag-missing':'bag missing','start-of-quarter':'start of quarter'};return/*#__PURE__*/_jsx(\"span\",{className:rowData.laundrystatus,children:laundryStatusDisplay[rowData.laundrystatus]});}},{key:\"renderStatusFilter\",value:function renderStatusFilter(){var statuses=[{label:'Picked Up',value:'picked-up'},{label:'Out of Service',value:'out-of-service'},{label:'Delivered to SH',value:'delivered-to-SH'},{label:'Delivered to Dorm',value:'delivered-to-dorm'},{label:'Bag Missing',value:'bag-missing'},{label:'Start of Quarter',value:'start-of-quarter'}];return/*#__PURE__*/_jsx(Dropdown,{value:this.state.selectedStatus,options:statuses,onChange:this.onStatusFilterChange,showClear:true,placeholder:\"Select a Status\",className:\"p-column-filter\",style:{maxWidth:200,minWidth:50}});}},{key:\"weightBodyTemplate\",value:function weightBodyTemplate(rowData){return/*#__PURE__*/_jsx(\"span\",{className:rowData.weightstatus,children:rowData.weightstatus});}},{key:\"onStatusFilterChange\",value:function onStatusFilterChange(event){this.dt.filter(event.value,'laundrystatus','equals');this.setState({selectedStatus:event.value});}//dropdown for reshall\n},{key:\"reshallBodyTemplate\",value:function reshallBodyTemplate(rowData){var _reshallDisplay;var reshallDisplay=(_reshallDisplay={'560 Lincoln':'560 Lincoln','720 Emerson':'720 Emerson','1715 Chicago Ave':'1715 Chicago Ave','1838 Chicago':'1838 Chicago','1856 Orrington':'1856 Orrington','2303 Sheridan':'2303 Sheridan','Ayers':'Ayers','Allison':'Allison','Bobb':'Bobb','Chapin':'Chapin','East Fairchild':'East Fairchild','Elder':'Elder','West Fairchild':'West Fairchild','Foster-Walker':'Foster-Walker','Goodrich':'Goodrich','Hobart':'Hobart','Jones':'Jones','Kemper':'Kemper','McCulloch':'McCulloch','PARC':'PARC (North Mid Quads)','Rogers House':'Rogers House','Sargent':'Sargent','SMQ':'Shepard Residential College (South Mid Quads)','Shepard':'Shepard','Slivka':'Slivka','Willard':'Willard','Delta Gamma':'Delta Gamma','Kappa Kappa Gamma':'Kappa Kappa Gamma'},_defineProperty(_reshallDisplay,\"Foster-Walker\",'Foster-Walker'),_defineProperty(_reshallDisplay,'Zeta Beta Tau (ZBT)','Zeta Beta Tau (ZBT)'),_reshallDisplay);return/*#__PURE__*/_jsx(\"span\",{className:rowData.reshall,children:reshallDisplay[rowData.reshall]});}},{key:\"renderReshallFilter\",value:function renderReshallFilter(){var reshalls=[{label:'560 Lincoln',value:'560 Lincoln'},{label:'720 Emerson',value:'720 Emerson'},{label:'1715 Chicago',value:'1715 Chicago'},{label:'1838 Chicago',value:'1838 Chicago'},{label:'1856 Orrington',value:'1856 Orrington'},{label:'2303 Sheridan',value:'2303 Sheridan'},{label:'Ayers',value:'Ayers'},{label:'Allison',value:'Allison'},{label:'Bobb',value:'Bobb'},{label:'Chapin',value:'Chapin'},{label:'East Fairchild',value:'East Fairchild'},{label:'Elder',value:'Elder'},{label:'West Fairchild',value:'West Fairchild'},{label:'Foster-Walker',value:'Foster-Walker'},{label:'Goodrich',value:'Goodrich'},{label:'Hobart',value:'Hobart'},{label:'Jones',value:'Jones'},{label:'Kemper',value:'Kemper'},{label:'McCulloch',value:'McCulloch'},{label:'PARC (North Mid Quads)',value:'PARC'},{label:'Rogers House',value:'Rogers House'},{label:'Sargent',value:'Sargent'},{label:'Shepard Residential College (South Mid Quads)',value:'SMQ'},{label:'Shepard',value:'Shepard'},{label:'Slivka',value:'Slivka'},{label:'Willard',value:'Willard'},{label:'Delta Gamma',value:'Delta Gamma'},{label:'Kappa Kappa Gamma',value:'Kappa Kappa Gamma'},{label:'Foster-Walker',value:'Foster-Walker'},{label:'Zeta Beta Tau (ZBT)',value:'Zeta Beta Tau (ZBT)'}];return/*#__PURE__*/_jsx(Dropdown,{value:this.state.selectedReshall,options:reshalls,onChange:this.onReshallFilterChange,showClear:true,placeholder:\"Select a Dorm\",className:\"p-column-filter\",style:{maxWidth:200,minWidth:50}});}},{key:\"onReshallFilterChange\",value:function onReshallFilterChange(event){this.dt.filter(event.value,'reshall','equals');this.setState({selectedReshall:event.value});}},{key:\"componentWillMount\",value:function componentWillMount(){this.loadInitialState();}},{key:\"render\",value:function render(){var _this3=this;var statusFilter=this.renderStatusFilter();var reshallFilter=this.renderReshallFilter();var allcustomers=this.state.customers;var currentcustomers=this.state.selectedCustomers;/* --------------- RETURN ---------------- */ /* ---------------- edit mode ------------*/if(this.state.editing){var header=/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'left'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",style:{backgroundColor:'#6a09a4',borderColor:'#6a09a4',marginRight:10},icon:\"pi pi-external-link\",iconPos:\"left\",label:\"CSV\",onClick:this.export}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{color:'white',backgroundColor:'#6a09a4',borderColor:'#6a09a4',marginRight:10},icon:\"pi pi-save\",iconPos:\"left\",label:\"SAVE\",onClick:this.save})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{type:\"button\",style:{color:'#23547B',backgroundColor:'#B3E5FC',borderColor:'#23547B',marginRight:10},icon:\"pi pi-check\",iconPos:\"left\",label:\"PICKED UP\",onClick:function onClick(){_this3.bagStatusEditor(allcustomers,currentcustomers,'picked-up');}}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{color:'#694382',backgroundColor:'#ECCFFF',borderColor:'#694382',marginRight:10},icon:\"pi pi-check\",iconPos:\"left\",label:\"SH\",onClick:function onClick(){_this3.bagStatusEditor(allcustomers,currentcustomers,'delivered-to-SH');}}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{color:'#256029',backgroundColor:'#C8E6C9',borderColor:'#256029',marginRight:10},icon:\"pi pi-check\",iconPos:\"left\",label:\"DORM\",onClick:function onClick(){_this3.bagStatusEditor(allcustomers,currentcustomers,'delivered-to-dorm');}}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{color:'#474549',backgroundColor:'lightgrey',borderColor:'#474549',marginRight:10},icon:\"pi pi-check\",iconPos:\"left\",label:\"NO SERVICE\",onClick:function onClick(){_this3.bagStatusEditor(allcustomers,currentcustomers,'out-of-service');}}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{color:'#C63737',backgroundColor:'#FFCDD2',borderColor:'#C63737',marginRight:10},icon:\"pi pi-check\",iconPos:\"left\",label:\"MISSING\",onClick:function onClick(){_this3.bagStatusEditor(allcustomers,currentcustomers,'bag-missing');}}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{color:'#474549',backgroundColor:'lightgrey',borderColor:'#474549',marginRight:10},icon:\"pi pi-check\",iconPos:\"left\",label:\"START\",onClick:function onClick(){_this3.bagStatusEditor(allcustomers,currentcustomers,'start-of-quarter');}})]}),/*#__PURE__*/_jsx(\"div\",{})]});//loading = {true} loadingIcon = \"pi pi-spinner\"\nreturn/*#__PURE__*/_jsx(\"div\",{id:\"elmid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rez Ops Bag Tracker\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The BagTracker is used to update bag statuses, including location, warnings, or overages of bags each the week.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"ONLY individuals running operations should be accessing this page.\"}),/*#__PURE__*/_jsxs(DataTable,{value:this.state.customers,header:header,ref:function ref(el){_this3.dt=el;},style:{marginBottom:'20px'},responsive:true,autoLayout:true,editMode:\"row\",rowEditorValidator:this.onRowEditorValidator,onRowEditInit:this.onRowEditInit,onRowEditSave:this.onRowEditSave,onRowEditCancel:this.onRowEditCancel,footer:this.displaySelection(this.state.selectedCustomers),selection:this.state.selectedCustomers,onSelectionChange:function onSelectionChange(e){return _this3.setState({selectedCustomers:e.value});},children:[/*#__PURE__*/_jsx(Column,{selectionMode:\"multiple\",style:{width:'3em'}}),/*#__PURE__*/_jsx(Column,{field:\"id\",header:\"ID\",sortable:true}),/*#__PURE__*/_jsx(Column,{field:\"name\",header:\"Name\",style:{maxWidth:150},sortable:true,filter:true,filterPlaceholder:\"Search by name\"}),/*#__PURE__*/_jsx(Column,{field:\"reshall\",header:\"Residential Hall\",style:{maxWidth:200},sortable:true,filter:true,filterElement:reshallFilter,body:this.reshallBodyTemplate}),/*#__PURE__*/_jsx(Column,{field:\"laundrystatus\",header:\"Bag Status\",style:{maxWidth:150},sortable:true,filter:true,filterElement:statusFilter,body:this.statusBodyTemplate}),/*#__PURE__*/_jsx(Column,{field:\"weightstatus\",header:\"Weight Status\",style:{maxWidth:150},sortable:true,body:this.weightBodyTemplate}),/*#__PURE__*/_jsx(Column,{field:\"weekweight\",header:\"Bag Weight\",sortable:true,style:{backgroundColor:'#6a09a4',color:'white',maxWidth:100},editor:this.generalEditor})]})]})});/* ---------------- NOT edit mode ------------*/}else{var header=/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'left'},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",style:{backgroundColor:'#6a09a4',borderColor:'#6a09a4',marginRight:10},icon:\"pi pi-external-link\",iconPos:\"left\",label:\"CSV\",onClick:this.export}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{backgroundColor:'#6a09a4',borderColor:'#6a09a4',marginRight:10},icon:\"pi pi-pencil\",iconPos:\"left\",label:\"EDIT\",onClick:this.edit})]});return/*#__PURE__*/_jsx(\"div\",{id:\"elmid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rez Ops Bag Tracker\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The BagTracker is used to update bag statuses, including location, warnings, or overages of bags each the week.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"ONLY individuals running operations should be accessing this page.\"}),/*#__PURE__*/_jsxs(DataTable,{value:this.state.customers,header:header,ref:function ref(el){_this3.dt=el;},style:{marginBottom:'20px'},responsive:true,autoLayout:true,editMode:\"row\",rowEditorValidator:this.onRowEditorValidator,onRowEditInit:this.onRowEditInit,onRowEditSave:this.onRowEditSave,onRowEditCancel:this.onRowEditCancel,children:[/*#__PURE__*/_jsx(Column,{field:\"id\",header:\"ID\",sortable:true}),/*#__PURE__*/_jsx(Column,{field:\"name\",header:\"Name\",style:{maxWidth:150},sortable:true,filter:true,filterPlaceholder:\"Search by name\"}),/*#__PURE__*/_jsx(Column,{field:\"reshall\",header:\"Residential Hall\",style:{maxWidth:200},sortable:true,filter:true,filterElement:reshallFilter,body:this.reshallBodyTemplate}),/*#__PURE__*/_jsx(Column,{field:\"laundrystatus\",header:\"Bag Status\",style:{maxWidth:150},sortable:true,filter:true,filterElement:statusFilter,body:this.statusBodyTemplate}),/*#__PURE__*/_jsx(Column,{field:\"weightstatus\",header:\"Weight Status\",style:{maxWidth:150},sortable:true,body:this.weightBodyTemplate}),/*#__PURE__*/_jsx(Column,{field:\"weekweight\",header:\"Bag Weight\",style:{maxWidth:100},sortable:true})]})]})});}}}]);return BagTracker;}(Component);","map":{"version":3,"sources":["/Users/carolinelobel/Documents/GitHub/ink-tank-bulk-orders/src/components/BagTracker.js"],"names":["React","Component","Button","Dropdown","DataTable","Column","InputText","firebase","validator","customerData","BagTracker","loadInitialState","customerArray","database","ref","on","snapshot","forEach","childSnapshot","val","activestatus","push","toJSON","setState","customers","loading","state","selectedStatus","selectedReshall","editing","selectedCustomers","edit","bind","save","export","onStatusFilterChange","onReshallFilterChange","bagStatusEditor","displaySelection","generalEditor","dt","exportCSV","props","value","currDate","console","log","rowIndex","parseInt","maxweight","parseFloat","over","rowData","id","set","updatedCustomers","field","db","currWeight","currDay","Date","getDate","currMonth","getMonth","currYear","getFullYear","fullDate","toDateString","currTime","toLocaleTimeString","child","once","then","laundrystatus","weightstatus","updateWeightStatus","curr","maxWidth","e","onEditorValueChange","target","inputTextEditor","allcustomers","currentcustomers","newstatus","ids","Object","keys","map","key","each","includes","weekweight","dothisfirst","query","orderByKey","counter","transaction","currOverages","data","length","textAlign","laundryStatusDisplay","statuses","label","minWidth","event","filter","reshallDisplay","reshall","reshalls","statusFilter","renderStatusFilter","reshallFilter","renderReshallFilter","header","marginBottom","backgroundColor","borderColor","marginRight","color","el","onRowEditorValidator","onRowEditInit","onRowEditSave","onRowEditCancel","width","reshallBodyTemplate","statusBodyTemplate","weightBodyTemplate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button } from 'primereact/button';\nimport { Dropdown } from 'primereact/dropdown';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column'\nimport { InputText } from 'primereact/inputtext';\n\nimport firebase from 'firebase/app';\nimport 'firebase/database';\n\nimport validator from 'validator'\n\n\nimport customerData from '../customers.json';\n// import classNames from 'classnames';\n\nimport '../Dashboard.css';\n//import { arrayToHash } from '@fullcalendar/core/util/object';\n\n\nexport class BagTracker extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            customers: [],\n            selectedStatus: null,\n            selectedReshall: null,\n            editing: false,\n            loading: true,\n            selectedCustomers: null\n        };\n        this.edit = this.edit.bind(this);\n        this.save = this.save.bind(this);\n        this.export = this.export.bind(this);\n        this.onStatusFilterChange = this.onStatusFilterChange.bind(this);\n        this.onReshallFilterChange = this.onReshallFilterChange.bind(this);\n        this.bagStatusEditor = this.bagStatusEditor.bind(this)\n        this.displaySelection = this.displaySelection.bind(this)\n        this.loadInitialState = this.loadInitialState.bind(this)\n        this.generalEditor = this.generalEditor.bind(this);\n\n\n\n    }\n    export() {\n        this.dt.exportCSV();\n    }\n\n    /* --------------- Editing ---------------- */\n    edit() {\n        this.setState({ editing: true });\n    }\n\n    save() {\n        this.setState({ editing: false });\n    }\n\n\n    updateWeightStatus(props,value, currDate) {\n\n        console.log(this.state.customers[props.rowIndex])\n        // console.log(props.rowIndex)\n\n        //if (value > props.rowData.maxweight) {\n        \n        //if (value > firebase.database().ref('/customers/'+props.rowData.id+'/maxweight')) {\n        console.log('value: ',value);\n        console.log('maxweight comparison: ',parseInt(this.state.customers[props.rowIndex].maxweight));\n        if (parseFloat(value) > parseFloat(this.state.customers[props.rowIndex].maxweight)) {\n            let over = parseFloat(value) - parseFloat(this.state.customers[props.rowIndex].maxweight)\n            console.log('marking as overweight.');\n            firebase.database().ref('/customers/' + props.rowData.id + '/'+'weightstatus').set('overweight')\n            /*let temp = firebase.database().ref('/customers/' + props.rowData.id + '/' + 'quarter-overages')\n            temp.once('value', (snapshot) => {\n                let total = snapshot.val()+over\n                firebase.database().ref('/customers/' + props.rowData.id + '/' + 'quarter-overages').set(total)\n            })*/\n            let updatedCustomers = this.state.customers;\n            updatedCustomers[props.rowIndex][props.field] = value;\n            updatedCustomers[props.rowIndex]['weightstatus'] = 'overweight';\n            //updatedCustomers[props.rowIndex]['quarter-overages'] += parseFloat(value);\n            // this.setState({ customers: updatedCustomers });\n            return value\n        }\n        else {\n            console.log('marking as underweight');\n            firebase.database().ref('/customers/' + props.rowData.id + '/'+'weightstatus').set('underweight')\n            let updatedCustomers = this.state.customers;\n            updatedCustomers[props.rowIndex][props.field] = value;\n            updatedCustomers[props.rowIndex]['weightstatus'] = 'underweight';\n            // this.setState({ customers: updatedCustomers });\n            return value\n        }\n    }\n\n    async onEditorValueChange(props, value) {\n\n        firebase.database().ref('/customers/' + props.rowData.id + '/' + props.field).set(value)\n        const db = firebase.database().ref();\n        var currWeight = value;\n        var currDay = new Date().getDate();\n        var currMonth = new Date().getMonth() +1;\n        if (currMonth < 10) {\n            currMonth = '0'+currMonth\n        }\n        if (currDay < 10) {\n            currDay = '0' + currDay\n        }\n        var currYear = new Date().getFullYear();\n        var currDate = currYear + '-' + currMonth + '-'+currDay;\n        var fullDate = new Date().toDateString();\n        var currTime = new Date().toLocaleTimeString('it-IT');\n        db.child('/orders/' + currDate + props.rowData.id).once(\"value\")\n            .then(snapshot => {\n                if (!snapshot.val()) {\n                    db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id).set(0)\n                    db.child('/orders/' + currDate +' '+currTime+' - '+props.rowData.id + '/weight').set(currWeight);\n                    db.child('/orders/' + currDate+' '+currTime+' - ' + props.rowData.id + '/maxweight').set(props.rowData.maxweight);\n                    db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/id').set(props.rowData.id);\n                    db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/laundrystatus').set(props.rowData.laundrystatus);\n                    db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/weightstatus').set(props.rowData.weightstatus);\n                }\n                db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/date').set(currDate+' '+ currTime);\n                db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/weight').set(currWeight);\n                db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/maxweight').set(props.rowData.maxweight);\n                db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/id').set(props.rowData.id);\n                db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/laundrystatus').set(props.rowData.laundrystatus);\n                db.child('/orders/' + currDate +' '+currTime+' - '+ props.rowData.id + '/weightstatus').set(props.rowData.weightstatus);\n\n            })\n        firebase.database().ref('/customers/' + props.rowData.id + '/last_weight_updated').set(currDate + ' ' + currTime)\n        const curr = await this.updateWeightStatus(props,value, currDate);\n    }\n\n    inputTextEditor(props, field) {\n        return <InputText type=\"text\" value={props.rowData[field]} style={{ maxWidth: 100 }} onChange={(e) => { this.onEditorValueChange(props, e.target.value);}}/>\n    }\n\n    generalEditor(props) {\n        return this.inputTextEditor(props, ' ');\n    }\n\n    // onRowEditInit(event) {\n    //     this.clonedCars[event.data.vin] = { ...event.data };\n    // }\n\n    // onRowEditSave(event) {\n    //     if (this.onRowEditorValidator(event.data)) {\n    //         delete this.clonedCars[event.data.vin];\n    //         this.growl.show({ severity: 'success', summary: 'Success', detail: 'Car is updated' });\n    //     }\n    //     else {\n    //         this.growl.show({ severity: 'error', summary: 'Error', detail: 'Brand is required' });\n    //     }\n    // }\n\n    // onRowEditCancel(event) {\n    //     let cars = [...this.state.cars2];\n    //     cars[event.index] = this.clonedCars[event.data.vin];\n    //     delete this.clonedCars[event.data.vin];\n    //     this.setState({\n    //         cars2: cars\n    //     })\n    // }\n\n    bagStatusEditor(allcustomers, currentcustomers, newstatus) {\n        let updatedCustomers = [...allcustomers];\n        const db = firebase.database().ref()\n        var currDay = new Date().getDate();\n        var currMonth = new Date().getMonth() +1;\n        if (currMonth < 10) {\n            currMonth = '0'+currMonth\n        }\n        if (currDay < 10) {\n            currDay = '0' + currDay\n        }\n        var currYear = new Date().getFullYear();\n        var currDate = currYear + '-' + currMonth + '-'+currDay;\n        //var currDate = new Date().toDateString();\n        var currTime = new Date().toLocaleTimeString('it-IT');\n\n        if (currentcustomers) {\n            var ids = Object.keys(currentcustomers).map(function (key) {\n                return currentcustomers[key].id;\n            });\n            updatedCustomers.map(each => {\n                if (ids.includes(each.id)) {\n                    each.laundrystatus = newstatus;\n                    if (newstatus == 'out-of-service') {\n                        each.weightstatus = 'N/A'\n                        each.weekweight = 'N/A'\n                        db.child('/customers/'+each.id+'/weekweight').set('N/A');\n                        db.child('/customers/'+each.id+'/weightstatus').set('N/A');\n                    }\n                    firebase.database().ref('/customers/' + each.id + '/last_status_updated').set(currDate + ' ' + currTime)\n\n                    db.child('/orders/' + currDate + each.id).once(\"value\")\n                        .then(snapshot => {\n                            if (!snapshot.val()) {\n                                db.child('/orders/' + currDate +' '+currTime+' - '+ each.id).set(0)\n                                db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/weight').set(each.weekweight);\n                                db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/maxweight').set(each.maxweight);\n                                db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/id').set(each.id);\n                                db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/laundrystatus').set(each.laundrystatus);\n                                db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/weightstatus').set(each.weightstatus);\n                            }\n                            db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/date').set(currDate+' '+ currTime);\n                            db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/weight').set(each.weekweight);\n                            db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/maxweight').set(each.maxweight);\n                            db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/id').set(each.id);\n                            db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/laundrystatus').set(each.laundrystatus);\n                            db.child('/orders/' + currDate +' '+currTime+' - '+ each.id + '/weightstatus').set(each.weightstatus);\n\n                        })\n\n                }\n            })\n            this.setState({ customers: updatedCustomers });\n        }\n        console.log('bagStatusEditor currentcustomers: ',currentcustomers);\n        this.dothisfirst(currentcustomers, newstatus)\n\n    }\n\n\n    dothisfirst(currentcustomers, newstatus) {\n        console.log('currentcustomers: ',currentcustomers);\n        console.log('newstatus: ',newstatus);\n        if (currentcustomers) {\n            var ids = Object.keys(currentcustomers).map(function (key) {\n                return currentcustomers[key].id;\n            });\n            console.log('ids: ',ids);\n            var query = firebase.database().ref(\"customers\").orderByKey();\n            query.once(\"value\")\n                .then(function (snapshot) {\n                    var counter=0;\n                    snapshot.forEach(function (childSnapshot) {\n                        var key = childSnapshot.key;\n                        if (ids.includes(key)) {\n                            var key = childSnapshot.key;\n                            firebase.database().ref('/customers/' + key + '/' + \"laundrystatus\").set(newstatus);\n                            console.log('currentcustomers in forEach: ',currentcustomers);\n                            if (newstatus === 'delivered-to-SH' && parseFloat(currentcustomers[counter].weekweight) > parseFloat(currentcustomers[counter].maxweight)) {\n                                firebase.database().ref('/customers/' + key + '/' + \"quarter_overages\").transaction(function(currOverages) {\n                                    //return currOverages+1;\n                                    return currOverages + parseFloat(currentcustomers[counter].weekweight) - parseFloat(currentcustomers[counter].maxweight);\n                                });\n                            }\n                            counter = counter+1;\n\n                        }\n                    });\n                });\n        }\n        return currentcustomers\n    }\n\n\n    displaySelection(data) {\n        if (this.state.editing && (!data || data.length === 0)) {\n            return <div style={{ textAlign: 'left' }}>No Selection</div>;\n        }\n    }\n\n\n    /* --------------- Filters ---------------- */\n\n//dropdown for laundrystats\n    statusBodyTemplate(rowData) {\n        var laundryStatusDisplay = {\n            'picked-up': 'picked up',\n            'delivered-to-SH': 'delivered to SH',\n            'delivered-to-dorm': 'delivered to dorm',\n            'out-of-service': 'out of service',\n            'bag-missing': 'bag missing',\n            'start-of-quarter': 'start of quarter'\n        }\n        return <span className={rowData.laundrystatus}>{laundryStatusDisplay[rowData.laundrystatus]}</span>\n    }\n\n\n    renderStatusFilter() {\n        var statuses = [\n            { label: 'Picked Up', value: 'picked-up' },\n            { label: 'Out of Service', value: 'out-of-service' },\n            { label: 'Delivered to SH', value: 'delivered-to-SH' },\n            { label: 'Delivered to Dorm', value: 'delivered-to-dorm' },\n            { label: 'Bag Missing', value: 'bag-missing' },\n            { label: 'Start of Quarter', value: 'start-of-quarter' }\n        ];\n\n        return (\n\n            <Dropdown value={this.state.selectedStatus} options={statuses} onChange={this.onStatusFilterChange}\n             showClear={true} placeholder=\"Select a Status\" className=\"p-column-filter\" style={{maxWidth: 200, minWidth: 50}} />\n        );\n    }\n\n    weightBodyTemplate(rowData) {\n        return <span className={rowData.weightstatus}>{rowData.weightstatus}</span>;\n    }\n\n\n    onStatusFilterChange(event) {\n        this.dt.filter(event.value, 'laundrystatus', 'equals');\n        this.setState({ selectedStatus: event.value });\n    }\n\n\n//dropdown for reshall\n\n    reshallBodyTemplate(rowData) {\n        var reshallDisplay = {\n          '560 Lincoln': '560 Lincoln',\n          '720 Emerson': '720 Emerson',\n            '1715 Chicago Ave': '1715 Chicago Ave',\n          '1838 Chicago': '1838 Chicago',\n          '1856 Orrington': '1856 Orrington',\n          '2303 Sheridan': '2303 Sheridan',\n          'Ayers': 'Ayers',\n          'Allison': 'Allison',\n          'Bobb': 'Bobb',\n          'Chapin': 'Chapin',\n          'East Fairchild': 'East Fairchild',\n          'Elder': 'Elder',\n          'West Fairchild': 'West Fairchild',\n          'Foster-Walker': 'Foster-Walker',\n          'Goodrich': 'Goodrich',\n          'Hobart': 'Hobart',\n          'Jones': 'Jones',\n          'Kemper': 'Kemper',\n          'McCulloch': 'McCulloch',\n          'PARC': 'PARC (North Mid Quads)',\n          'Rogers House': 'Rogers House',\n          'Sargent': 'Sargent',\n          'SMQ': 'Shepard Residential College (South Mid Quads)',\n          'Shepard': 'Shepard',\n          'Slivka': 'Slivka',\n          'Willard':  'Willard',\n          'Delta Gamma': 'Delta Gamma',\n          'Kappa Kappa Gamma': 'Kappa Kappa Gamma',\n          'Foster-Walker': 'Foster-Walker',\n            'Zeta Beta Tau (ZBT)': 'Zeta Beta Tau (ZBT)'\n          }\n          return <span className={rowData.reshall}>{reshallDisplay[rowData.reshall]}</span>\n    }\n\n    renderReshallFilter() {\n        var reshalls = [\n            { label: '560 Lincoln', value: '560 Lincoln' },\n            { label: '720 Emerson', value: '720 Emerson'},\n            { label: '1715 Chicago', value: '1715 Chicago'},\n            { label: '1838 Chicago', value: '1838 Chicago'},\n            { label: '1856 Orrington', value: '1856 Orrington'},\n            { label: '2303 Sheridan', value: '2303 Sheridan'},\n            { label: 'Ayers', value: 'Ayers'},\n            { label: 'Allison', value: 'Allison'},\n            { label: 'Bobb', value: 'Bobb' },\n            { label: 'Chapin', value: 'Chapin'},\n            { label: 'East Fairchild', value: 'East Fairchild'},\n            { label: 'Elder', value: 'Elder'},\n            { label: 'West Fairchild', value: 'West Fairchild'},\n            { label: 'Foster-Walker', value: 'Foster-Walker'},\n            { label: 'Goodrich', value: 'Goodrich'},\n            { label: 'Hobart', value: 'Hobart'},\n            { label: 'Jones', value: 'Jones' },\n            { label: 'Kemper', value: 'Kemper'},\n            { label: 'McCulloch', value: 'McCulloch'},\n            { label: 'PARC (North Mid Quads)', value: 'PARC'},\n            { label: 'Rogers House', value: 'Rogers House' },\n            { label: 'Sargent', value: 'Sargent'},\n            { label: 'Shepard Residential College (South Mid Quads)', value: 'SMQ'},\n            { label: 'Shepard', value: 'Shepard'},\n            { label: 'Slivka', value: 'Slivka'},\n            { label: 'Willard', value: 'Willard'},\n            { label: 'Delta Gamma', value: 'Delta Gamma'},\n            { label: 'Kappa Kappa Gamma', value: 'Kappa Kappa Gamma'},\n            { label: 'Foster-Walker', value: 'Foster-Walker'},\n            { label: 'Zeta Beta Tau (ZBT)', value: 'Zeta Beta Tau (ZBT)'}\n    ];\n\n        return (\n\n            <Dropdown value={this.state.selectedReshall} options={reshalls} onChange={this.onReshallFilterChange}\n             showClear={true} placeholder=\"Select a Dorm\" className=\"p-column-filter\" style={{maxWidth: 200, minWidth: 50}} />\n        );\n    }\n\n\n    onReshallFilterChange(event) {\n        this.dt.filter(event.value, 'reshall', 'equals');\n        this.setState({ selectedReshall: event.value });\n    }\n\n\n\n\n\n\n    loadInitialState = async () => {\n        const customerArray = [];\n        firebase.database().ref('/customers').on('value', function (snapshot) {\n            snapshot.forEach(function (childSnapshot) {\n                if (childSnapshot.val().activestatus === 'active' ) {\n                    customerArray.push(childSnapshot.toJSON());\n                }\n\n            });\n        });\n        this.setState({ customers: customerArray });\n        this.setState({ loading: false });\n\n    }\n\n    componentWillMount() {\n        this.loadInitialState()\n    }\n\n    render() {\n        const statusFilter = this.renderStatusFilter();\n        const reshallFilter = this.renderReshallFilter();\n        const allcustomers = this.state.customers;\n        const currentcustomers = this.state.selectedCustomers;\n\n        /* --------------- RETURN ---------------- */\n        /* ---------------- edit mode ------------*/\n        if (this.state.editing) {\n            var header = <div style={{ textAlign: 'left' }}>\n                <div style={{ marginBottom: 10 }}>\n                    <Button type=\"button\" style={{ backgroundColor: '#6a09a4', borderColor: '#6a09a4', marginRight: 10 }} icon=\"pi pi-external-link\" iconPos=\"left\" label=\"CSV\" onClick={this.export}>\n                    </Button>\n                    <Button type=\"button\" style={{ color: 'white', backgroundColor: '#6a09a4', borderColor: '#6a09a4', marginRight: 10 }} icon=\"pi pi-save\" iconPos=\"left\" label=\"SAVE\" onClick={this.save}>\n                    </Button>\n                </div>\n                <div>\n                    <Button type=\"button\" style={{ color: '#23547B', backgroundColor: '#B3E5FC', borderColor: '#23547B', marginRight: 10 }} icon=\"pi pi-check\" iconPos=\"left\" label=\"PICKED UP\" onClick={() => { this.bagStatusEditor(allcustomers, currentcustomers, 'picked-up')}}>\n                    </Button>\n                    <Button type=\"button\" style={{ color: '#694382', backgroundColor: '#ECCFFF', borderColor: '#694382', marginRight: 10 }} icon=\"pi pi-check\" iconPos=\"left\" label=\"SH\" onClick={() => { this.bagStatusEditor(allcustomers, currentcustomers, 'delivered-to-SH') }}>\n                    </Button>\n                    <Button type=\"button\" style={{ color: '#256029', backgroundColor: '#C8E6C9', borderColor: '#256029', marginRight: 10 }} icon=\"pi pi-check\" iconPos=\"left\" label=\"DORM\" onClick={() => { this.bagStatusEditor(allcustomers, currentcustomers, 'delivered-to-dorm') }}>\n                    </Button>\n                    <Button type=\"button\" style={{ color: '#474549', backgroundColor: 'lightgrey', borderColor: '#474549', marginRight: 10 }} icon=\"pi pi-check\" iconPos=\"left\" label=\"NO SERVICE\" onClick={() => { this.bagStatusEditor(allcustomers, currentcustomers, 'out-of-service') }}>\n                    </Button>\n                    <Button type=\"button\" style={{ color: '#C63737', backgroundColor: '#FFCDD2', borderColor: '#C63737', marginRight: 10 }} icon=\"pi pi-check\" iconPos=\"left\" label=\"MISSING\" onClick={() => { this.bagStatusEditor(allcustomers, currentcustomers, 'bag-missing') }}>\n                    </Button>\n                    <Button type=\"button\" style={{ color: '#474549', backgroundColor: 'lightgrey', borderColor: '#474549', marginRight: 10 }} icon=\"pi pi-check\" iconPos=\"left\" label=\"START\" onClick={() => { this.bagStatusEditor(allcustomers, currentcustomers, 'start-of-quarter') }}>\n                    </Button>\n\n                </div>\n                <div>\n\n                </div>\n            </div>;\n            //loading = {true} loadingIcon = \"pi pi-spinner\"\n            return (\n                <div id=\"elmid\">\n                    <div className=\"card\">\n                        <h1>Rez Ops Bag Tracker</h1>\n                        <p>The BagTracker is used to update bag statuses, including location, warnings, or overages of bags each the week.</p>\n                        <p>ONLY individuals running operations should be accessing this page.</p>\n                        <DataTable value={this.state.customers} header={header} ref={(el) => { this.dt = el; }} style={{ marginBottom: '20px' }} responsive={true} autoLayout={true}\n                        editMode=\"row\" rowEditorValidator={this.onRowEditorValidator} onRowEditInit={this.onRowEditInit} onRowEditSave={this.onRowEditSave} onRowEditCancel={this.onRowEditCancel}\n                        footer={this.displaySelection(this.state.selectedCustomers)} selection={this.state.selectedCustomers} onSelectionChange={e => this.setState({ selectedCustomers: e.value })}>\n                            <Column selectionMode=\"multiple\" style={{ width: '3em' }} />\n                            <Column field=\"id\" header=\"ID\" sortable={true} />\n                            <Column field=\"name\" header=\"Name\" style={{ maxWidth: 150 }} sortable filter filterPlaceholder=\"Search by name\" />\n                            <Column field=\"reshall\" header=\"Residential Hall\" style={{ maxWidth: 200 }} sortable={true} filter filterElement={reshallFilter} body={this.reshallBodyTemplate}/>\n                            <Column field=\"laundrystatus\" header=\"Bag Status\" style={{ maxWidth: 150 }} sortable={true} filter filterElement={statusFilter} body={this.statusBodyTemplate}/>\n                            <Column field=\"weightstatus\" header=\"Weight Status\" style={{ maxWidth: 150 }} sortable={true} body={this.weightBodyTemplate}/>\n\n                            <Column field=\"weekweight\" header=\"Bag Weight\" sortable={true} style={{ backgroundColor: '#6a09a4', color: 'white', maxWidth: 100 }} editor={this.generalEditor}/>\n                        </DataTable>\n                    </div>\n                </div>\n            );\n            /* ---------------- NOT edit mode ------------*/\n        } else {\n            var header = <div style={{ textAlign: 'left' }}>\n                <Button type=\"button\" style={{ backgroundColor: '#6a09a4', borderColor: '#6a09a4', marginRight: 10 }} icon=\"pi pi-external-link\" iconPos=\"left\" label=\"CSV\" onClick={this.export}>\n                </Button>\n                <Button type=\"button\" style={{ backgroundColor: '#6a09a4', borderColor: '#6a09a4', marginRight: 10 }} icon=\"pi pi-pencil\" iconPos=\"left\" label=\"EDIT\" onClick={this.edit}>\n                </Button>\n            </div>;\n            return (\n\n                <div id=\"elmid\">\n                    <div className=\"card\">\n                        <h1>Rez Ops Bag Tracker</h1>\n                        <p>The BagTracker is used to update bag statuses, including location, warnings, or overages of bags each the week.</p>\n                        <p>ONLY individuals running operations should be accessing this page.</p>\n                        <DataTable value={this.state.customers} header={header} ref={(el) => { this.dt = el; }} style={{ marginBottom: '20px' }} responsive={true} autoLayout={true} editMode=\"row\" rowEditorValidator={this.onRowEditorValidator} onRowEditInit={this.onRowEditInit} onRowEditSave={this.onRowEditSave} onRowEditCancel={this.onRowEditCancel}>\n                            <Column field=\"id\" header=\"ID\" sortable={true} />\n                            <Column field=\"name\" header=\"Name\" style={{ maxWidth: 150 }} sortable filter filterPlaceholder=\"Search by name\" />\n                            <Column field=\"reshall\" header=\"Residential Hall\" style={{ maxWidth: 200 }} sortable={true} filter filterElement={reshallFilter} body={this.reshallBodyTemplate}/>\n                            <Column field=\"laundrystatus\" header=\"Bag Status\" style={{ maxWidth: 150 }} sortable={true} filter filterElement={statusFilter} body={this.statusBodyTemplate} />\n                            <Column field=\"weightstatus\" header=\"Weight Status\" style={{ maxWidth: 150 }} sortable={true} body={this.weightBodyTemplate}/>\n                            <Column field=\"weekweight\" header=\"Bag Weight\" style={{ maxWidth: 100 }} sortable={true} />\n\n                        </DataTable>\n                    </div>\n                </div>\n            );\n\n        }\n\n    }\n}\n"]},"metadata":{},"sourceType":"module"}